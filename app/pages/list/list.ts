import {Page, NavController} from 'ionic-angular';
import {AddPage} from "../add/add";
import {UserService} from "../../service/userservice";
import {AngularFire, FirebaseListObservable} from 'angularfire2';


@Page({
    templateUrl: 'build/pages/list/list.html'
})
export class ListPage {
    
    public todoList = [];
    items : FirebaseListObservable<any>
    firebase : AngularFire
    constructor(private nav: NavController, firebase : AngularFire) { 
    this.firebase = firebase
        
        
    }
 
    onPageDidEnter() {
    this.items = this.firebase.database.list('/toDoListData/'+UserService.getInstance().uid)
    this.items.subscribe(snapshots => {
    this.todoList = snapshots
     console.log(this.todoList)

})   
    }

    delete(index: number) {
        console.log("This friggin index:"+index)
        
        this.items.remove(this.todoList[index].$key).then(onSuccess =>{
        
      this.todoList.splice(index, 0);
        })

    }
 
    add() {
        this.nav.push(AddPage);
    }
    logout(){
        this.nav.pop();

      }
}






































































































































































































































































































































































































































































































































































































































































































































